<!DOCTYPE html>
<html>
<head>
	<meta charset="utf8">
	<title>领红包</title>
	<meta name="viewport" content="maximum-scale=3, minimum-scale=1, width=320, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="format-detection" content="telephone=no" />
	<!--STYLE_PLACEHOLDER-->
</head>
<body>
<button id="packet_btn">领红包</button>
<div id="times" style="display:none;">已领取<span></span>次</div>
<ul id="list"></div>

<script src="../../mod/mod.js"></script>
<!--RESOURCEMAP_PLACEHOLDER-->
<!--SCRIPT_PLACEHOLDER-->
<script>
	var $ = require('Zepto');
	var HongBao = require('hongbao')({
		count : 100,   //100个红包
		total : 10,    // 总金额 10元 ， 必选
		max : 1,  // 单个红包最大额度 1元，可选，默认1
		min : 0.01, // 单个红包最小额度 0.01元， 可选，默认0.1
		digit : 2 // 红包金额保留小数点后 2 位  
	});
	var $btn = $('#packet_btn'), $list = $('#list'), $times = $('#times'), $span = $times.find('span');;
	var times = 0;
	$btn.click(function(){
		times++;
		times === 1 && $times.show();
		$span.html(times);
		var packet = HongBao.getPacket();
		if(!~packet){
			$span.css('color', 'red');
			$list.prepend('<li>抱歉！红包不够了~ </li>');
			return false;
		}
		$list.prepend('<li>恭喜获得 ' + packet + ' 元红包一个！</li>');
	});
</script>
</body>
</html>